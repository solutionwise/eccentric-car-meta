import{r as l,g as x,j as d,n as c,c as p,a as e,x as b,k as w,Q as m,R as f,t as g,o as v}from"./CXJKphkF.js";import{u as h}from"./B6j7ZqBZ.js";const k={class:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8"},_={class:"max-w-md w-full space-y-8"},S={class:"rounded-md shadow-sm -space-y-px"},P={key:0,class:"text-red-600 text-sm text-center"},T=["disabled"],j={__name:"login",setup(M){const o=l(""),r=l(""),n=l(!1),a=l(""),{apiCall:i}=h(),y=async()=>{if(!o.value||!r.value){a.value="Please enter both username and password";return}n.value=!0,a.value="";try{const t=await i("/api/auth/login",{method:"POST",body:{username:o.value,password:r.value}});if(t.success){const{$auth:s}=d();s.setToken(t.token),await c("/")}else a.value=t.message||"Login failed"}catch(t){a.value="Login failed. Please check your credentials.",console.error("Login error:",t)}finally{n.value=!1}};return x(async()=>{try{const{$auth:t}=d();if(!t.getToken())return;await i("/api/auth/verify"),await c("/")}catch{}}),(t,s)=>(v(),p("div",k,[e("div",_,[s[4]||(s[4]=e("div",null,[e("h2",{class:"mt-6 text-center text-3xl font-extrabold text-gray-900"}," Sign in to your account "),e("p",{class:"mt-2 text-center text-sm text-gray-600"}," Eccentric Car Meta - AI Image Search ")],-1)),e("form",{class:"mt-8 space-y-6",onSubmit:b(y,["prevent"])},[e("div",S,[e("div",null,[s[2]||(s[2]=e("label",{for:"username",class:"sr-only"},"Username",-1)),m(e("input",{id:"username","onUpdate:modelValue":s[0]||(s[0]=u=>o.value=u),name:"username",type:"text",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Username"},null,512),[[f,o.value]])]),e("div",null,[s[3]||(s[3]=e("label",{for:"password",class:"sr-only"},"Password",-1)),m(e("input",{id:"password","onUpdate:modelValue":s[1]||(s[1]=u=>r.value=u),name:"password",type:"password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm",placeholder:"Password"},null,512),[[f,r.value]])])]),a.value?(v(),p("div",P,g(a.value),1)):w("",!0),e("div",null,[e("button",{type:"submit",disabled:n.value,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50"},g(n.value?"Signing in...":"Sign in"),9,T)])],32)])]))}};export{j as default};
